# Функциональные требования MVP

## Основные модули системы

### Модуль "Каталог продуктов"
1. Система должна отображать каталог продуктов в виде карточек, каждая из которых содержит: фото, название, краткое описание, стоимость и кнопку "Выбрать"
2. Система должна предоставлять возможность детального просмотра и настройки продукта
3. Система должна предоставлять навигацию между разделами продуктов

### Модуль "Взаимодействие с клиентом"
1. Система должна предоставлять корзину с возможностью редактирования (добавление/удаление, количество)
2. Система должна предоставлять форму оформления заказа с полями: "Имя", "Телефон", "Адрес", "Желаемое время доставки"
3. Система должна позволять пользователям просматривать статус своих заказов

### Модуль "Авторизация и безопасность"
1. Система должна предоставлять форму авторизации для сотрудников с полями "Логин" и "Пароль"
2. Система должна проверять корректность учетных данных и предоставлять доступ к панели администратора только после успешной аутентификации
3. Система должна предоставлять форму авторизации для обычных пользователей
4. Система должна поддерживать роли (user/admin) для ограничения доступа к функциям

### Модуль "Управление меню"
1. Система должна предоставлять интерфейс для просмотра списка всех продуктов (пицц, добавок)
2. Система должна позволять добавлять новые продукты, редактировать существующие (название, описание, стоимость, фотографии) и удалять продукты
3. Система должна валидировать вводимые данные (неотрицательная стоимость, заполненные обязательные поля)

### Модуль "Управление заказами"
1. Система должна отображать список заказов от клиентов с информацией об имени, телефоне, дате подачи и статусе
2. Система должна предоставлять возможность изменения статуса заказа и удаления обработанных заказов (для админов)
3. Система должна позволять пользователям просматривать статус своих заказов

### Модуль "Управление контентом"
1. Система должна предоставлять интерфейс для загрузки изображений продуктов

## Технические требования
- Два проекта в монорепозитории: frontend (Next.js с публичной и админ-частью) + ui-library (библиотека общих компонентов)
- ES6 modules (import/export)
- TypeScript
- Запрещены: require, module.exports, var

## Use Case: Оформление заказа на пиццу
### Участники
Клиент, Система
### Предусловия
- Клиент находится на сайте пиццерии
- Клиент добавил хотя бы один товар в корзину
- Система загрузила данные меню и корзины
### Основной сценарий
1. Клиент открывает корзину
2. Система отображает список выбранных пицц с ценами, добавками, количеством и общей суммой
3. Клиент нажимает кнопку "Перейти к оформлению"
4. Система перенаправляет на страницу оформления (/checkout) и показывает форму с полями "Имя", "Телефон", "Адрес", "Желаемое время доставки"
5. Клиент заполняет обязательные поля
6. Клиент нажимает "Отправить заказ"
7. Система валидирует данные (проверяет формат телефона, наличие имени)
8. Система сохраняет заказ в базе данных через Prisma и присваивает статус "Новый"
9. Система показывает модальное окно с подтверждением и номером заказа

### Результат
Заказ успешно оформлен, сохранен в БД, клиент получает подтверждение, админ может обработать заказ
### Альтернативный сценарий
1. На шаге 7 система обнаруживает некорректный телефон
2. Система подсвечивает поле ошибки и показывает сообщение "Введите корректный номер телефона"
3. Клиент исправляет данные
4. Возврат к шагу 6
### Исключения
- Если корзина пуста, система показывает сообщение "Корзина пуста" и предлагает вернуться в меню

## Use Case: Авторизация пользователя
### Участники
Пользователь, Система
### Предусловия
- Пользователь находится на сайте
- Пользователь не авторизован
### Основной сценарий
1. Пользователь нажимает на кнопку "Войти"
2. Система отображает форму с полями
3. Пользователь вводит данные
4. Пользователь нажимает "Войти"
5. Система отсылает код
6. Пользователь вводит полученный код
7. Пользователь получает доступ к личным заказам (/orders)
### Результат
Пользователь авторизован и может просматривать свои заказы

## Use Case: Просмотр и управление статусом заказа
### Участники
Пользователь/Админ, Система
### Предусловия
- Пользователь/Админ авторизован
- Заказ существует в БД
### Основной сценарий (для пользователя)
1. Пользователь переходит на /orders
2. Система отображает список заказов с номерами, датами и статусами
3. Пользователь выбирает заказ
4. Система показывает детали и текущий статус
### Основной сценарий (для админа)
1. Админ переходит на /admin/dashboard/orders
2. Система отображает все заказы
3. Админ выбирает заказ и меняет статус (новый/в работе/готов/завершен)
4. Система обновляет статус в БД
### Результат
Статус заказа обновлен, пользователь видит изменения в своем профиле

## Use Case: Добавление/редактирование продукта админом
### Участники
Администратор, Система
### Предусловия
- Администратор авторизован в админ-панели
- Перешёл в раздел управления меню (/admin/menu)
### Основной сценарий (добавление нового продукта)
1. Админ нажимает кнопку «Добавить продукт»
2. Система открывает модальное окно/форму с полями:
- Название (обязательное)
- Полное описание
- Фото продукт
- Вес, калории
- Цена
3. Админ заполняет все поля
4. Продукт добавляется в список
5. Админ нажимает «Сохранить»
6. Система сохраняет продукт в БД через Prisma
7. Система закрывает модалку и показывает уведомление «Продукт успешно добавлен»
8. Список продуктов обновляется — новый продукт появляется в каталоге 
### Альтернативный сценарий (редактирование существующего продукта)
1. Админ нажимает «Редактировать» на карточке продукта
2. Система открывает ту же форму, предзаполненную текущими данными
3. Админ вносит изменения
4. Админ нажимает «Сохранить»
5. Система обновляет запись в БД
6. Уведомление «Продукт успешно обновлён»

### Результат
Новый или обновлённый продукт доступен в публичном каталоге, изменения сразу видны клиентам.